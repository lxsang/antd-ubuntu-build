(function(){var t,n,o,s={}.hasOwnProperty;o=this.OS.PM,n=this.OS.APP,(t=function(t){function i(t){i.__super__.constructor.call(this,"ActivityMonitor",t)}return function(t,i){for(var e in i)s.call(i,e)&&(t[e]=i[e]);function r(){this.constructor=t}r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype}(i,t),i.prototype.main=function(){var t,r;return(r=this).scheme.set("apptitle","Activity Monitor"),this.grid=this.find("mygrid"),this.on("btclick",function(t){var i,e;if("btkill"===t.id&&(e=r.grid.get("selected")))return(i=o.appByPid(e[0].value))?i.quit(!0):void 0}),t=[{width:50,value:"__(Pid)"},{value:"__(Name)"},{value:"__(Type)",width:80},{width:75,value:"__(Alive (ms))"}],this.gdata={processes:{},alive:[]},this.grid.set("header",t),this.monitor()},i.prototype.monitor=function(){var e,r;return(e=this).gdata.alive=[],r=(new Date).getTime(),$.each(o.processes,function(t,i){return $.each(i,function(t,i){return e.gdata.processes[i.pid]?e.gdata.processes[i.pid][3].value=r-i.birth:e.gdata.processes[i.pid]=[{value:i.pid},{icon:1===n[i.name].type?n[i.name].meta.icon:i.icon,iconclass:1===n[i.name].type?n[i.name].meta.iconclass:i.iconclass,value:i.name},{value:1===n[i.name].type?"__(Application)":"__(Service)"},{value:r-i.birth}],e.gdata.alive.push(i.pid)})}),this.refreshGrid(),this.timer=setTimeout(function(){return e.monitor()},500)},i.prototype.refreshGrid=function(){var e,r;return e=[],r=this,$.each(this.gdata.processes,function(t,i){return 0<=$.inArray(Number(t),r.gdata.alive)?e.push(i):r.gdata.processes[t]=void 0}),this.grid.set("rows",e)},i.prototype.cleanup=function(t){if(this.timer)return clearTimeout(this.timer)},i}(this.OS.GUI.BaseApplication)).singleton=!0,this.OS.register("ActivityMonitor",t)}).call(this);