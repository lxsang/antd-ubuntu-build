(function(){var t,i,e,r={}.hasOwnProperty;e=this.OS.PM,i=this.OS.APP,(t=function(t){function n(t){n.__super__.constructor.call(this,"ActivityMonitor",t)}return function(t,i){for(var e in i)r.call(i,e)&&(t[e]=i[e]);function n(){this.constructor=t}n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype}(n,t),n.prototype.main=function(){var t,i;return i=this,this.scheme.set("apptitle","Activity Monitor"),this.grid=this.find("mygrid"),this.on("btclick",function(t){var r,n;if("btkill"===t.id&&(n=i.grid.get("selected")))return(r=e.appByPid(n[0].value))?r.quit():void 0}),t=[{width:50,value:"__(Pid)"},{value:"__(Name)"},{value:"__(Type)",width:80},{width:75,value:"__(Alive (ms))"}],this.gdata={processes:{},alive:[]},this.grid.set("header",t),this.monitor()},n.prototype.monitor=function(){var t,r;return(t=this).gdata.alive=[],r=(new Date).getTime(),$.each(e.processes,function(e,n){return $.each(n,function(e,n){return t.gdata.processes[n.pid]?t.gdata.processes[n.pid][3].value=r-n.birth:t.gdata.processes[n.pid]=[{value:n.pid},{icon:1===i[n.name].type?i[n.name].meta.icon:n.icon,iconclass:1===i[n.name].type?i[n.name].meta.iconclass:n.iconclass,value:n.name},{value:1===i[n.name].type?"__(Application)":"__(Service)"},{value:r-n.birth}],t.gdata.alive.push(n.pid)})}),this.refreshGrid(),this.timer=setTimeout(function(){return t.monitor()},500)},n.prototype.refreshGrid=function(){var t,i;return t=[],i=this,$.each(this.gdata.processes,function(e,r){return $.inArray(Number(e),i.gdata.alive)>=0?t.push(r):i.gdata.processes[e]=void 0}),this.grid.set("rows",t)},n.prototype.cleanup=function(t){if(this.timer)return clearTimeout(this.timer)},n}(this.OS.GUI.BaseApplication)).singleton=!0,this.OS.register("ActivityMonitor",t)}).call(this);