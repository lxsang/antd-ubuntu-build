(function(){var t,i={}.hasOwnProperty;t=function(t){function e(t){e.__super__.constructor.call(this,"Calendar",t),this.text="",this.iconclass="fa fa-calendar"}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.init=function(){var t;return t=this,this.watch(1e3,function(){var i;return i=new Date,t.text=i.toString(),t.update()})},e.prototype.awake=function(t){return this.openDialog("CalendarDialog",function(t){return console.log(t)},"Calendar")},e.prototype.cleanup=function(t){return console.log("cleanup for quit")},e}(this.OS.GUI.BaseService),this.OS.register("Calendar",t)}).call(this),function(){var t,i={}.hasOwnProperty;t=function(t){function e(t){e.__super__.constructor.call(this,"PushNotification",t),this.iconclass="fa fa-bars",this.onmenuselect=function(t){return console.log(t)},this.cb=void 0,this.pending=[]}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.init=function(){var t;return this.view=!1,t=t=this.meta().path+"/notifications.html",this.render(t)},e.prototype.spin=function(t){return t&&"fa fa-bars"===this.iconclass?(this.iconclass="fa fa-spinner fa-spin",this.color="#f90e00",this.update()):t||"fa fa-spinner fa-spin"!==this.iconclass?void 0:(this.iconclass="fa fa-bars",this.color="#414339",this.update())},e.prototype.main=function(){var t;return t=this,this.mlist=this.find("notifylist"),this.mfeed=this.find("notifeed"),this.nzone=this.find("notifyzone"),this.fzone=this.find("feedzone"),this.find("btclear").set("onbtclick",function(i){return t.mlist.set("items",[])}),this.subscribe("notification",function(i){return t.pushout("INFO",i)}),this.subscribe("fail",function(i){return t.pushout("FAIL",i)}),this.subscribe("error",function(i){return t.pushout("ERROR",i)}),this.subscribe("info",function(i){return t.pushout("INFO",i)}),this.subscribe("VFS",function(i){return t.pushout("INFO",i)}),this.subscribe("loading",function(i){return t.pending.push(i.id),t.spin(!0)}),this.subscribe("loaded",function(i){var e;if((e=t.pending.indexOf(i.id))>=0&&t.pending.splice(e,1),0===t.pending.length)return t.spin(!1)}),$(this.nzone).css("right",0).css("top","-3px").css("height","").css("bottom","0").css("z-index",1e6).hide(),$(this.fzone).css("bottom","0").css("height","").hide()},e.prototype.pushout=function(t,i,e){var n;return n={text:"["+t+"] "+i.name+" ("+i.id+"): "+i.data.m,icon:i.data.icon,iconclass:i.data.iconclass,closable:!0},console.log(i.data.s),console.log(i.data.e),this.mlist.unshift(n,!0),this.notifeed(n)},e.prototype.notifeed=function(t){var i,e;return i=this,this.mfeed.unshift(t,!0),$(this.fzone).show(),e=setTimeout(function(){return i.mfeed.remove(t,!0),clearTimeout(e)},3e3)},e.prototype.awake=function(t){var i;return this.view?$(this.nzone).hide():$(this.nzone).show(),this.view=!this.view,i=this,this.cb||(this.cb=function(t){if(!t.originalEvent.item||void 0===t.originalEvent.item.i)return $(t.target).closest($(i.nzone)).length||$(t.target).closest($(i.holder.root)).length?void 0:($(i.nzone).hide(),$(document).unbind("click",i.cb),i.view=!i.view)}),this.view?$(document).on("click",this.cb):$(document).unbind("click",this.cb)},e.prototype.cleanup=function(t){},e}(this.OS.GUI.BaseService),this.OS.register("PushNotification",t)}.call(this),function(){var t,i,e=function(t,i){for(var e in i)n.call(i,e)&&(t[e]=i[e]);function o(){this.constructor=t}return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t},n={}.hasOwnProperty;i=function(t){function i(){i.__super__.constructor.call(this,"SpotlightDialog")}return e(i,t),i.prototype.init=function(){return this.render(this.path()+"/spotlight.html")},i.prototype.main=function(){var t,i;return i=this,this.height=$(this.scheme).css("height"),this.container=this.find("container"),$(this.scheme).css("height","45px"),t=function(e){if(!$(e.target).closest(i.scheme).length&&($(document).unbind("click",t),i.handler))return i.handler(e)},$(document).click(t),this.searchbox=this.find("searchbox"),$(this.searchbox).focus(),$(this.searchbox).keyup(function(t){return i.search(t)}),this.container.set("onlistdbclick",function(t){if(!t.data.dataid||"header"!==t.data.dataid)return i.handler&&i.handler(t),i._gui.openWith(t.data)})},i.prototype.search=function(t){var i,e,n;switch(t.which){case 37:return t.preventDefault();case 38:return this.container.selectPrev(),t.preventDefault();case 39:return t.preventDefault();case 40:return this.container.selectNext(),t.preventDefault();case 13:if(t.preventDefault(),!(e=this.container.get("selected")))return;if(e.dataid&&"header"===e.dataid)return;return this.handler&&this.handler(t),this._gui.openWith(e);default:if(n=this.searchbox.value,$(this.scheme).css("height","45px"),!(n.length>3))return;if(0===(i=this._api.search(n)).length)return;return this.container.set("items",i),$(this.scheme).css("height",this.height)}},i}(this.OS.GUI.BaseDialog),this.OS.register("SpotlightDialog",i),t=function(t){function i(t){i.__super__.constructor.call(this,"Spotlight",t),this.iconclass="fa fa-search",this.show=!1}return e(i,t),i.prototype.init=function(){},i.prototype.main=function(){},i.prototype.awake=function(t){var i;return i=this,this.show=!this.show,this.show?this.openDialog("SpotlightDialog",function(t){return i.show=!1,i.dialog&&i.dialog.quit(),i.dialog=void 0}):this.dialog?this.dialog.quit():void 0},i.prototype.cleanup=function(t){},i}(this.OS.GUI.BaseService),this.OS.register("Spotlight",t)}.call(this),function(){var t,i={}.hasOwnProperty;t=function(t){function e(t){e.__super__.constructor.call(this,"UserService",t),this.text=this.systemsetting.user.username,this.iconclass=void 0}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(e,t),e.prototype.init=function(){var t;return t=this,this.child=[{text:"About",dataid:"user-about",iconclass:"fa fa-user-circle-o"},{text:"Logout",dataid:"sys-logout",iconclass:"fa fa-user-times"}],this.onmenuselect=function(i){return"sys-logout"===i.item.data.dataid?t._api.handler.logout():t.notify("This feature is not implemented yet")}},e.prototype.awake=function(t){},e.prototype.cleanup=function(t){},e}(this.OS.GUI.BaseService),this.OS.register("UserService",t)}.call(this);